---
output: html_document
---

<- precompile this document with  ->
<- knitr::knit("vignettes/baseline_tables_stata.Rmd.orig", output = "vignettes/baseline_tables_stata.Rmd") ->

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE,
                      engine.path = list(stata = "C:/Program Files/Stata17/StataBE-64.exe"))
# precompile vignette
# knitr::knit("vignettes/baseline_tables_stata.Rmd.orig", output = "vignettes/baseline_tables_stata.Rmd")
```

```{stata}
sysuse auto2
btable mpg weight displacement, by(foreign) saving("btab")
btable_format using "btab", clear
export delimited "formatted_btab.csv", replace novarnames
```

Then the table can be read back into R and printed with e.g. flextable.

```{r, message = FALSE}
dat <- readr::read_csv("formatted_btab.csv")
dat[is.na(dat)] <- "" # replace NAs
names(dat)[1] <- " "  # set missing var name
dat %>%
  flextable::flextable()
```

